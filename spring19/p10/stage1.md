# Not ready yet, don't start!

# Stage 1: Web Scraping

In this stage, you're going to write code to download the data files,
load the data to Pandas DataFrames, and then answer various questions
about the data.

The questions you must answer are below.  If a given cell is answering
a question number N, the cell should have a comment that looks like
this:

```python
#qN
... code that computes the answer ...
```

For example, the cell that answers the first question should contain a
comment that says `#q1`.



## Q1: what is the total area across all the countries in the dataset?

*Hint 1*: `pd.read_json(URL)` will return a DataFrame by downloading the
 JSON file from online at URL.  If the downloaded JSON contains a list
 of dictionaries, each dictionary will be a row in the DataFrame.

*Hint 2*: review how to extract a single column as a Series from a
 DataFrame.  You can add all the values in a Series with the `.sum()`
 method.

## Q2: what is the first URL in the capitals.txt page?

You may hardcode this URL in your program:
https://tyler.caraza-harter.com/cs301/fall18/data/capitals.txt.  You
must, however, answer this question by programmatically extracting the
first line from capitals.txt.

*Hint*: use requests.get to download the
 [capitals.txt](https://tyler.caraza-harter.com/cs301/fall18/data/capitals.txt),
 then split it into a list.


## Q3 Gathering Our Data

For the rest of these questions, we are going to need the data that is spread out between the different URLS.
The best way to do this is by gathering the data into a dataframe.

Before we are able to create our data frame we must first gather our data.

The steps to accomplish this are as follows:

1. Use the methods covered in class including `requests.get()` to download the data from each webpage.
2. store all the data in a single list of dictionaries.

for Question 3 output this list of dictionaries

## Caching and Creating the Dataframe

Due to our data being online, we don't have a version of it on our system.
This means we always have to regather our data inbetween runs which can be quite costly.

In order to make our code function off-line and save runtime we will create a cache on our local system.

This can be accomplished by surrounding your code from Q3 with the following:

```
if not os.path.exists("capitals.json"):
    rows = []
    ###Begin your code to extract the web-data
    
    ###End your code to extract the web-data
    
    with open("capitals.json", "w") as f:
        json.dump(rows, f)

with open("capitals.json") as f:
    rows = json.load(f)
```

This will allow your code to create a local copy of capitals.json that contains all the web-data.

Now create your Dataframe using `DataFrame(rows)`


## Q4: what is the capital of Bermuda?

Now we can begin to answer more complex questions using our newly constructed Dataframe.

Our first task will be determining the capital of Bermuda.


*Hint*: you can use fancy indexing to extract the row where the
 `Country` equals "China".  Then, extract the `Capital` Series, from
 which you can grab the only value with the
 [Series.item()](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.item.html)
 function.

## Q5: Which country is Maputo the capital of?

Same Process as Q4

## Q6: which 5 countries have the southern-most capitals?

*Format*: produce your answer as a JSON-formatted list of five
 countries.  The list should be sorted so that the countries with
 capitals farther south are first.

*Hint 1*: look at the documentation examples of how to sort a
 DataFrame with the
 [sort_values](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html)
 function.

*Hint 2*: look at examples that used the
  [head](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html)
  function.

## Q7: which 3 countries have the northern-most capitals?

*Format*: produce your answer as a JSON-formatted list of three
 countries.  The list should be sorted so that the countries with
 capitals farther north are first.


## Q8: for "birth-rate" and "death-rate", what are various summary statistics (e.g., mean, max, standard deviation, etc)?

*Format*: use the
 [describe](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.describe.html)
 function on a DataFrame that contains `birth-rate` and `death-rate`
 columns.  You may include summary statistics for other columns in
 your output, as long as your summary table has stats for birth and
 death.

## Q9: for "literacy" and "phone", what are various summary statistics (e.g., mean, max, standard deviation, etc)?

*Format*: a table generated by the describe function.

In [some
 countries](https://en.wikipedia.org/wiki/Decimal_separator#Arabic_numerals),
 it is standard to use commas instead of periods to indicate decimals.
 The `literacy` and `phone` data is formatted this way (i.e., decimal
 numbers represented as strings, with commas for decimals).  You'll
 need to reformat the data to use periods (instead of commas), then
 convert the column of strings to a column of floats.

*Hint*: learn how to use the
 [astype](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.astype.html)
 and
 [replace](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.replace.html)
 Pandas functions.

## Q10: what is the largest land-locked country in Europe?

A "land-locked" country is one that has zero coastline.  Largest is in terms of **area**.

## Q11: what is the largest land-locked country in Africa?

Same as Q8.

## Q12: what is the largest land-locked country in South America?

Same as Q8.


## Q13: what is the distance between Camp Randall Stadium and the Wisconsin State Capital?

This isn't related to countries, but it's a good warmup for the next
problems.  Your answer should be about 1.433899492072933 miles.

Assumptions:
* the latitude/longitude of Randall Stadium is 43.070231,-89.411893
* the latitude/longitude of the Wisconsin Capital is 43.074645,-89.384113
* use the Haversine formula: [http://www.movable-type.co.uk/scripts/gis-faq-5.1.html](http://www.movable-type.co.uk/scripts/gis-faq-5.1.html)
* the radius of the earth is 3956 miles
* answer in miles

If you find code online that computes the Haversine distance for you,
great!  You can use it as long as (1) it works and (2) you cite
the source with a comment.

If you decide to implement it yourself (it's fun!), here are some tips:
* review the formula: [http://www.movable-type.co.uk/scripts/gis-faq-5.1.html](http://www.movable-type.co.uk/scripts/gis-faq-5.1.html)
* remember that latitude and longitude are in degrees, but sin, cos, and other Python math functions usually expect radians.  Consider [math.radians](https://docs.python.org/3/library/math.html#math.radians)
* This means that before you do anything with the long and latitudes make sure to convert them to radians as your FIRST STEP
* people often use x^N to mean x raised to the Nth power.  Make sure you write it as x**N in Python.



## Q14: what is the distance between India and Brazil?

For the coordinates of a country, use its capital.

*Hint 1*: if your DataFrame of capitals is called `capitals`, what do
 you get from `capitals.set_index('country')`?

*Hint 2*: what do you get when you evaluate `capitals.set_index('country').loc['France']`?

## Q15 What are the distances between Chile, Guyana and Colombia

your result should be  table with 3 rows (for each country) and 3
columns (again for each country).  The value in each cell should
be the distance between the country of the row and the country 
of the column. For a general idea of what this should look like, open the
expected.html file you downloaded.  When displaying the distance
between a country and itself, the table should should NaN (instead of
0).


## Q16: what is the distance between every pair of South American countries?

Your result should be a table with 12 rows (for each country) and 12
columns (again for each country).  The value in each cell should be
the distance between the country of the row and the country of the
column.  For a general idea of what this should look like, open the
expected.html file you downloaded.  When displaying the distance
between a country and itself, the table should should NaN (instead of
0).

## Q17: what is the most central South American country?

This is the country that has the shortest average distance to other
South American countries.

*Hint 1*: check out the following Pandas functions:
* [DataFrame.mean](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.mean.html)
* [Series.sort_values](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.sort_values.html) (note this is not the same as the DataFrame.sort_values function you've used before)

*Hint 2*: a Pandas Series contains indexed values.  If you have a
 Series `s` and you want just the values, you can use `s.values`; if
 you want just the index, you can use `s.index`.  Both of these
 objects can readily be converted to lists.
 
## Q18: What is the least central South American country?

This will be the country that has the longest average distance to other
South American countries.

This should be a similiar process to what you did for Q17

## Q19: how close is each country in South America to it's nearest neighbour?

The answer should be in a table with countries as the index and two
columns: `nearest` will contain the name of the nearest country and
`distance` will contain the distance to that nearest country.

*Hint 1*: find a Series of numerical data you can experiment with
 (perhaps from one of the DataFrames you've been using for this
 project).  If your Series is named `s`, try running `s.min()`.
 Unsurprisingly, this returns the smallest value in the Series.  Now
 try running `s.idxmin()`.  What does it seem to be doing?

*Hint 2*: if you run `df.min()` on a DataFrame, Pandas applies that
 function to every column Series in the DataFrame.  The returned value
 is a Series.  The index of the returned Series contains the columns
 of the DataFrame, and the values of the returned Series contain the
 minimum values.  If you run `df.idxmin()` on a DataFrame, the
 returned values contain indexes from the DataFrame.
 ??
 ## Q20: how far is each country in South America to it's furthest neighbour?
 
 The answer should be in a table with countries as the index and two
 columns: `furthest` will contain the name of the furthest country and
 `distance` will contain the distance to that nearest country
 
 The Hints for #Q20 are the same as Q19, but you will be using something else instead of 
 `df.min()` and `df.idxmin()`
 